
(прим для себя: объясняй от базовых действий к более сложным.
что бы человек сразу мог что-то сделать.
сначала как вообще камру двигать, потом как купить отряды, потом про базовое передвижение и атаки,
потом уже всякие подробности про стоимость движения, шатрафы и т.п.)


Core game features are:

- advanced fog of war
- slot system (multiple units per tile)
- reaction fire (xcom-like)
- morale and suppression


# Руководство

## Главное меню

Всего три кнопки:

- текущая карта - по нажатию переключит на следующую
- кнопка "играть с ИИ"
- кнопка "играть с человеком на одном устройстве"

Почти все каты откровенно тестовые.


## Камера

Для перемещения камеры двигайте мышку с зажатой левой кнопкой.
Для вращения камеры двигайте мышку с зажатой левой кнопкой.
Для приближения (отдаления) камеры используйте клавиши "+" ("-") или кнопки `[+]` (`[-]`).

Прим: весь интерфейс временный и в последствие будет переделан

На андроиде перетаскивание курсора на левой половине отвечает
за движение камеры, на правой - за вращение.
(да-да, надо будет сделать стандартный мультитач)


## Подкрепления

В начале сценария нужно вызвать подкрепления, иначе просто не кем командовать.
Изначально у игроков есть 10 очков подкреплений и еще столько же будет добавляться каждый ход.
Подкрепления вызываются в секторах подкреплений, которые обозначены двумя кружками цвета игрока.

<картинка>

Нажимем на такую клетку, появляется базовое контекстное меню с одним доступным пунктом "подкрепления":

<картинка>

(что делать с цветами игроков? откуда новичку знать что он синий, а враг зеленый?)

По нажатию на этот пункт меня открывается меню с доступными для покупки отрядами.
Что бы отряд показывался в меню в секторе должно быть достаточно места для его размещения
и должно хватать очков подкреплений на его покупку.

При нажатии на один из вариантов отряд сразу появится на карте, но
действовать он сможет только на следующий ход.


## Окончание хода

Что бы закончить свой ход надо жать кнопку "[end turn]".

TODO: Когда рассказать про туман войны?
Вроде бы можно и отложить, но где-то надо упомнять что туман войны
обнуляется только в начале твоего хода.


## Выделение отрядов

При нажатии на клетку с интересующим отрядом появится контекстно меню с
вариантом `select <тип_юнита>`.

Наверху экрана появится полоска с краткими свойствами отряда
MP AP RAP M и т.п.


## Основы движения

При выделении отряда подсвечиваются доступные для передвижения в этот
ход клетки.

"move" - обычное движение

"hunt" - как обычное движение, только не дает штрафов к стрельбе,
дает шанс избежать реакционного огня (типа, проверка реакции)
очки движения не отнимаются (даже при стрельбе в отряд)
и в два раза дороже.


## Слоты

Основа игровой механики.

TODO: слоты? в какой момент о них стоит рассказать? Разбить на два этапа?

- обычные слоты
- на всю клетку
- воздушный слот

"обычные слоты" и "на всю клетку" конфликтуют:
если в клетке уже есть обычный отряд, то большая техника не сомжет въехать туда,
и наоборот - большая техника занимает сразу все обычные слоты.
Кстати, да, лучше говорить что большие отряды занимают прямо все обычные слоты.


## Атака

ОА - очки атаки

Оружие может иметь не только максимальную дальность стрельбы,
но и минимальную.

Тратится одно ОА.
Цель должна быть видима и в зоне дальности стрельбы оружия.
При нажатии на клетку, в которой находится цель, 
при условии что цель видима, не слищком далеко или близко и хватает ОА,
в контекстном меню появится пункт "`attack <тип врага> шанс_убить`".

Шанс попасть в врага

Шанс нанести урон

И тут должна быть всякая математика о вариантах последствия атаки.

При атаке может пострадать поевой дух противника (см. "Боевой дух")


## Реакционная атака

реакционные ОА (РОА)

Каждый ход отряду дается одно РОА плюс
неиспользованные за свой ход ОА превращаются в РОА.

На каждую атаку требуется одно РОА.

Атака происходит по триггерам в зоне видимости, к ним относятся:
- передвижение
- атака
- погрузка / выгрузка
- прицепление / отцепление


## Два радиуса видимости

TODO: скрытие пехоты в лесу, дыме и городе

У каждого отряда есть два радиуса видимости

``los_range`` - обычный радиус видимости

``cover_los_range`` - радиус видимости объектов в укрытиях.
Пехота в лесу или зданиях (где еще?) становится видимой только в этмо радиусе.

Или при атаке, но на следующий ход она пропадет из видимости.

[тут нужна схематичная иллюстрация]

Последний выше у разведчиков.

[не реализовано]
Оба радиуса видимости могут быть увеличины на один ход
командой "присмотреться", за счет всех (?) активных очков атаки отряда.


## Боевой дух

Изначально 100.
Каждый ход восстанавливается по 10 очков.
При каждой атаке у отряда отнимается столько очков БД,
какова была вероятность успешности атаки.
Падает ниже 50 - отряд считается подавленым
и теряет возможность атаковать.

TODO описать стандартную ситуацию с подавлением опасных клеток
перед пересечением открытой местности.


## Туман войны

Ставие невидимыми клетки убираются только в начале хода игрока.

TODO: склеить с "конец хода"?


## Дороги

Ускоряют передвижение большей части техники, особенно колесной.

Не распространяется на большую технику.

TODO: виды дорог? дорога в лесу?


## Перевозка

Пехота и полевые орудия могут сильно выиграть если их погрузить в грузовик.

Погрузка и выгрузка лишают пессажиров всех очков движения.
За один ход и то, и другое сделтаь не выйдет, потому что
для выгрузки нужны ОД.

ОА остаются, потому что они компенсируются реакционым огнем противника.


## Буксировка

полевые орудия и поврежденная техника могут сильно выиграть
если прицепить их к более быстрому или проходимому тягачу.

Полевые орудия передвигаются своим ходом еще меделнней пехоты,
так что их можно прикреплять к грузовикам.

Остовы техники тоже можно буксировать (что бы освободить проезд).

Есть требование что транспортер должен быть больше буксира (поле `size`).
Например, легкий танк не сможет тащить за собой тяжелый танк,
а джип не может буксировать полевое орудие.


## Вода и мосты

Назменые отряды не могут передвигаться по водным клеткам, если через нее нет моста.

Мост выглядит как простая дорога через водную клетку.
Имеет только один слот, это может быть важно для удержания врага на другом берегу.

Корабли, амфибии и передвижении легкой пехоты вплавь еще не реализованы.


## Виды городских клеток

Одно здание - движение техники почти не затруднено
Два здания - движение техники сильно затруднено
Три здания - техника не может двигаться
Большое здание - техника не может двигаться

Для защиты пехоты не имеет значения находится ли она внутри городской
клетки в здании или в уличном слоте. 
Важно что она просто в городской клетке какогото типа.


## Воздушные юниты

Вертолеты есть, самолетов и зениток еще нет.

Воздушные отряды не могут захватыать сектора.

Видят без "теней" от препятствий, но совсем не могут замечать пехоту в укрытиях,
пока та не начнет стрелять.


## Водная техника

[не реализована]


## Дымовая завеса

В данный момент только миномет может стрелять дымовыми снарядами.
Дым остается на несколько ходов.
Учти, что видимость пропадет только на следующий ход (когда обновится туман войны)


## Сокращения в интерфейсе и назначение кнопок

- `[<]` - выбрать прошлый отряд
- `[>]` - выбрать следующий отряд
- `[X]` - снять выделение

- AP - attack points
- RAP - reactive AP
- MP - move points
- M - morale


## Коротко про архитектуру приложения

TODO Команды, состояния, события и т.п.
TODO Полные и частичные состояния
TODO Адаптируй схемку их диплома.


